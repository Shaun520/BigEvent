const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./LoginPage-DeZCLoHH.js","./element-plus-BmZKzp7m.js","./@vue-BuWGUhr0.js","./lodash-es-Dz4Jxgv8.js","./async-validator-DKvM95Vc.js","./@vueuse-CNEPcfAf.js","./dayjs-Btipwhah.js","./axios-BDQOBJsj.js","./@element-plus-BHiQEyhT.js","./@ctrl-r5W6hzzQ.js","./@sxzz-D9SI2xQl.js","./normalize-wheel-es-B6fDCfyv.js","../css/element-plus-D6Us_I0w.css","./vue-router-DP6WE_UQ.js","./plugin-vueexport-helper-DlAUqK2U.js","./pinia-COOYOr1q.js","./vue-demi-Dq6ymT-8.js","./pinia-plugin-persistedstate-BQU3TZ4K.js","./destr-CVtkxrq9.js","./deep-pick-omit-CegYQlcN.js","../css/LoginPage-CvLzRHtf.css","./LayoutPage-CPokxvWQ.js","../css/LayoutPage-CChuslZt.css","./ArticleManage-BuFFeM7B.js","./article-9kDH31Oi.js","../css/article-Clkqf0Ko.css","./ArticleChannel-5xTjLwQa.js","./UserProfile-BceP8x8F.js","./UserAvatar-CyVUcfhk.js","./UserPassword-CLZa3zPU.js"])))=>i.map(i=>d[i]);
import{r as g,ab as S,o as O,Q as b,P as w,L as A,u as T,al as k}from"./@vue-BuWGUhr0.js";import{d as I,c as U}from"./pinia-COOYOr1q.js";import{s as V}from"./pinia-plugin-persistedstate-BQU3TZ4K.js";import{a as C}from"./axios-BDQOBJsj.js";import{c as D,a as B}from"./vue-router-DP6WE_UQ.js";import{E,z as j,a as q}from"./element-plus-BmZKzp7m.js";import"./vue-demi-Dq6ymT-8.js";import"./destr-CVtkxrq9.js";import"./deep-pick-omit-CegYQlcN.js";import"./lodash-es-Dz4Jxgv8.js";import"./async-validator-DKvM95Vc.js";import"./@vueuse-CNEPcfAf.js";import"./dayjs-Btipwhah.js";import"./@element-plus-BHiQEyhT.js";import"./@ctrl-r5W6hzzQ.js";import"./@sxzz-D9SI2xQl.js";import"./normalize-wheel-es-B6fDCfyv.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))i(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function a(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(t){if(t.ep)return;t.ep=!0;const s=a(t);fetch(t.href,s)}})();const x="modulepreload",z=function(e,r){return new URL(e,r).href},P={},l=function(r,a,i){let t=Promise.resolve();if(a&&a.length>0){const o=document.getElementsByTagName("link"),n=document.querySelector("meta[property=csp-nonce]"),v=(n==null?void 0:n.nonce)||(n==null?void 0:n.getAttribute("nonce"));t=Promise.allSettled(a.map(c=>{if(c=z(c,i),c in P)return;P[c]=!0;const p=c.endsWith(".css"),R=p?'[rel="stylesheet"]':"";if(!!i)for(let m=o.length-1;m>=0;m--){const d=o[m];if(d.href===c&&(!p||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${R}`))return;const u=document.createElement("link");if(u.rel=p?"stylesheet":x,p||(u.as="script"),u.crossOrigin="",u.href=c,v&&u.setAttribute("nonce",v),document.head.appendChild(u),p)return new Promise((m,d)=>{u.addEventListener("load",m),u.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const n=new Event("vite:preloadError",{cancelable:!0});if(n.payload=o,window.dispatchEvent(n),!n.defaultPrevented)throw o}return t.then(o=>{for(const n of o||[])n.status==="rejected"&&s(n.reason);return r().catch(s)})},_=D({history:B("./"),routes:[{path:"/login",component:()=>l(()=>import("./LoginPage-DeZCLoHH.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20]),import.meta.url)},{path:"/",component:()=>l(()=>import("./LayoutPage-CPokxvWQ.js"),__vite__mapDeps([21,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,22]),import.meta.url),redirect:"/article/manage",children:[{path:"/article/manage",component:()=>l(()=>import("./ArticleManage-BuFFeM7B.js"),__vite__mapDeps([23,1,2,3,4,5,6,7,8,9,10,11,12,24,14,25,15,16,17,18,19,13]),import.meta.url)},{path:"/article/channel",component:()=>l(()=>import("./ArticleChannel-5xTjLwQa.js"),__vite__mapDeps([26,1,2,3,4,5,6,7,8,9,10,11,12,24,14,25,15,16,17,18,19,13]),import.meta.url)},{path:"/user/profile",component:()=>l(()=>import("./UserProfile-BceP8x8F.js"),__vite__mapDeps([27,14,2]),import.meta.url)},{path:"user/avatar",component:()=>l(()=>import("./UserAvatar-CyVUcfhk.js"),__vite__mapDeps([28,14,2]),import.meta.url)},{path:"/user/password",component:()=>l(()=>import("./UserPassword-CLZa3zPU.js"),__vite__mapDeps([29,14,2]),import.meta.url)}]}]});_.beforeEach(e=>!y().token&&e.path!=="/login"?"/login":!0);const N="http://big-event-vue-api-t.itheima.net",f=C.create({baseURL:N,timeout:1e4});f.interceptors.request.use(e=>{const r=y();return r.token&&(e.headers.Authorization=r.token),e},e=>Promise.reject(e));f.interceptors.response.use(e=>e.data.code===0?e:(E.error(e.data.message||"服务异常"),Promise.reject(e.data)),e=>(e.response.status===401&&_.push("/login"),E.error(e.response.data.message||"服务异常"),Promise.reject(e)));const ce=({username:e,password:r,repassword:a})=>f.post("/api/reg",{username:e,password:r,repassword:a}),ue=({username:e,password:r})=>f.post("/api/login",{username:e,password:r}),$=()=>f.get("/my/userinfo"),y=I("user",()=>{const e=g(" "),r=o=>{e.value=o},a=()=>{e.value=""},i=g({});return{token:e,setToken:r,removeToken:a,user:i,getUser:async()=>{const o=await $();i.value=o.data.data},setUser:o=>{i.value=o}}},{persist:!0}),L=U();L.use(V);const H={__name:"App",setup(e){return(r,a)=>{const i=S("router-view"),t=q;return O(),b(t,{locale:T(j)},{default:w(()=>[A(i)]),_:1},8,["locale"])}}},h=k(H);h.use(L);h.use(_);h.mount("#app");export{ce as a,ue as b,f as i,y as u};
